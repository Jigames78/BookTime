{"ast":null,"code":"import React,{useState}from'react';import{useSupabaseBooks}from'./hooks/useSupabaseBooks';import Header from'./components/Header';import Stats from'./components/Stats';import SearchBar from'./components/SearchBar';import FilterTabs from'./components/FilterTabs';import BookGrid from'./components/BookGrid';import ImportModal from'./components/ImportModal';import AddBookModal from'./components/AddBookModal';import BookDetailModal from'./components/BookDetailModal';import UndoImportModal from'./components/UndoImportModal';// ← NOUVEAU\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function App(){const{books,loading,error,addBook,updateBook,deleteBook,importBooks,getStats}=useSupabaseBooks();const[searchTerm,setSearchTerm]=useState('');const[activeTab,setActiveTab]=useState('all');const[showAddModal,setShowAddModal]=useState(false);const[showImportModal,setShowImportModal]=useState(false);const[showUndoModal,setShowUndoModal]=useState(false);// ← NOUVEAU\nconst[selectedBook,setSelectedBook]=useState(null);const handleAddBook=async book=>{const result=await addBook(book);if(result.success){setShowAddModal(false);}else{alert('Erreur lors de l\\'ajout : '+result.error);}};const handleUpdateBook=async(bookId,updates)=>{const result=await updateBook(bookId,updates);if(!result.success){alert('Erreur lors de la mise à jour : '+result.error);}};const handleDeleteBook=async bookId=>{const result=await deleteBook(bookId);if(!result.success){alert('Erreur lors de la suppression : '+result.error);}};const handleImportBooks=async newBooks=>{const result=await importBooks(newBooks);if(result.success){setShowImportModal(false);}else{alert('Erreur lors de l\\'import : '+result.error);}};const filteredBooks=books.filter(book=>{const matchesSearch=book.title.toLowerCase().includes(searchTerm.toLowerCase())||book.author&&book.author.toLowerCase().includes(searchTerm.toLowerCase());if(activeTab==='autre'){return matchesSearch&&book.status==='autre';}if(activeTab==='all'){return matchesSearch&&book.status!=='autre';}const matchesTab=book.status===activeTab;return matchesSearch&&matchesTab;});const stats=getStats();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-black via-gray-900 to-black\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-teal-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white text-2xl animate-pulse\",children:\"Chargement de votre biblioth\\xE8que...\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-black via-gray-900 to-black\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-8 bg-red-900/20 border border-red-500 rounded-2xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-400 text-xl mb-2\",children:\"\\u26A0\\uFE0F Erreur de connexion\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-300\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),className:\"mt-4 px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-500\",children:\"R\\xE9essayer\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black\",children:[/*#__PURE__*/_jsx(Header,{onImportClick:()=>setShowImportModal(true),onAddClick:()=>setShowAddModal(true),onUndoClick:()=>setShowUndoModal(true)// ← NOUVEAU\n}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(Stats,{stats:stats}),/*#__PURE__*/_jsx(SearchBar,{searchTerm:searchTerm,onSearchChange:setSearchTerm}),/*#__PURE__*/_jsx(FilterTabs,{activeTab:activeTab,onTabChange:setActiveTab}),/*#__PURE__*/_jsx(BookGrid,{books:filteredBooks,onBookClick:setSelectedBook})]}),showImportModal&&/*#__PURE__*/_jsx(ImportModal,{onClose:()=>setShowImportModal(false),onImport:handleImportBooks}),showAddModal&&/*#__PURE__*/_jsx(AddBookModal,{onClose:()=>setShowAddModal(false),onAdd:handleAddBook}),showUndoModal&&/*#__PURE__*/// ← NOUVEAU\n_jsx(UndoImportModal,{onClose:()=>setShowUndoModal(false)}),selectedBook&&/*#__PURE__*/_jsx(BookDetailModal,{book:selectedBook,onClose:()=>setSelectedBook(null),onUpdate:handleUpdateBook,onDelete:handleDeleteBook})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}