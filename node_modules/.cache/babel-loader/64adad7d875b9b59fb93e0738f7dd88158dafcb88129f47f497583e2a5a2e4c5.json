{"ast":null,"code":"import { createClient } from '@supabase/supabase-js';\n\n// ðŸ” Configuration depuis les variables d'environnement\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL;\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY;\n\n// VÃ©rification de la configuration\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('âš ï¸ Configuration Supabase manquante !');\n  console.error('VÃ©rifiez votre fichier .env');\n}\n\n// âœ… Configuration avec options d'authentification correctes\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n    detectSessionInUrl: true,\n    storage: window.localStorage,\n    storageKey: 'booktime-auth'\n  },\n  db: {\n    schema: 'public'\n  },\n  global: {\n    headers: {\n      'x-application-name': 'booktime'\n    }\n  }\n});\n\n// ðŸ§ª Test de connexion au dÃ©marrage\nsupabase.from('books').select('count', {\n  count: 'exact',\n  head: true\n}).then(({\n  error\n}) => {\n  if (error) {\n    console.error('âŒ Erreur connexion Supabase:', error.message);\n  } else {\n    console.log('âœ… Connexion Supabase OK');\n  }\n});\n\n// Helper pour gÃ©rer les erreurs\nexport const handleSupabaseError = error => {\n  var _error$message, _error$message2, _error$message3;\n  console.error('Supabase error:', error);\n\n  // Messages d'erreur personnalisÃ©s\n  let errorMessage = 'Une erreur est survenue';\n  if ((_error$message = error.message) !== null && _error$message !== void 0 && _error$message.includes('JWT')) {\n    errorMessage = 'Session expirÃ©e, veuillez vous reconnecter';\n  } else if ((_error$message2 = error.message) !== null && _error$message2 !== void 0 && _error$message2.includes('Invalid login')) {\n    errorMessage = 'Identifiant ou mot de passe incorrect';\n  } else if ((_error$message3 = error.message) !== null && _error$message3 !== void 0 && _error$message3.includes('Network')) {\n    errorMessage = 'Erreur de connexion rÃ©seau';\n  } else if (error.message) {\n    errorMessage = error.message;\n  }\n  return {\n    success: false,\n    error: errorMessage\n  };\n};\n\n// Helper pour les rÃ©ponses rÃ©ussies\nexport const handleSupabaseSuccess = data => {\n  return {\n    success: true,\n    data\n  };\n};","map":{"version":3,"names":["createClient","supabaseUrl","process","env","REACT_APP_SUPABASE_URL","supabaseAnonKey","REACT_APP_SUPABASE_ANON_KEY","console","error","supabase","auth","persistSession","autoRefreshToken","detectSessionInUrl","storage","window","localStorage","storageKey","db","schema","global","headers","from","select","count","head","then","message","log","handleSupabaseError","_error$message","_error$message2","_error$message3","errorMessage","includes","success","handleSupabaseSuccess","data"],"sources":["/etudiants/siscol/f/ferna_ji/Bureau/BookTime/src/lib/supabase.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\n// ðŸ” Configuration depuis les variables d'environnement\nconst supabaseUrl = process.env.REACT_APP_SUPABASE_URL;\nconst supabaseAnonKey = process.env.REACT_APP_SUPABASE_ANON_KEY;\n\n// VÃ©rification de la configuration\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.error('âš ï¸ Configuration Supabase manquante !');\n  console.error('VÃ©rifiez votre fichier .env');\n}\n\n// âœ… Configuration avec options d'authentification correctes\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    persistSession: true,\n    autoRefreshToken: true,\n    detectSessionInUrl: true,\n    storage: window.localStorage,\n    storageKey: 'booktime-auth',\n  },\n  db: {\n    schema: 'public'\n  },\n  global: {\n    headers: {\n      'x-application-name': 'booktime',\n    },\n  },\n});\n\n// ðŸ§ª Test de connexion au dÃ©marrage\nsupabase.from('books').select('count', { count: 'exact', head: true })\n  .then(({ error }) => {\n    if (error) {\n      console.error('âŒ Erreur connexion Supabase:', error.message);\n    } else {\n      console.log('âœ… Connexion Supabase OK');\n    }\n  });\n\n// Helper pour gÃ©rer les erreurs\nexport const handleSupabaseError = (error) => {\n  console.error('Supabase error:', error);\n  \n  // Messages d'erreur personnalisÃ©s\n  let errorMessage = 'Une erreur est survenue';\n  \n  if (error.message?.includes('JWT')) {\n    errorMessage = 'Session expirÃ©e, veuillez vous reconnecter';\n  } else if (error.message?.includes('Invalid login')) {\n    errorMessage = 'Identifiant ou mot de passe incorrect';\n  } else if (error.message?.includes('Network')) {\n    errorMessage = 'Erreur de connexion rÃ©seau';\n  } else if (error.message) {\n    errorMessage = error.message;\n  }\n  \n  return {\n    success: false,\n    error: errorMessage\n  };\n};\n\n// Helper pour les rÃ©ponses rÃ©ussies\nexport const handleSupabaseSuccess = (data) => {\n  return {\n    success: true,\n    data\n  };\n};"],"mappings":"AAAA,SAASA,YAAY,QAAQ,uBAAuB;;AAEpD;AACA,MAAMC,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB;AACtD,MAAMC,eAAe,GAAGH,OAAO,CAACC,GAAG,CAACG,2BAA2B;;AAE/D;AACA,IAAI,CAACL,WAAW,IAAI,CAACI,eAAe,EAAE;EACpCE,OAAO,CAACC,KAAK,CAAC,uCAAuC,CAAC;EACtDD,OAAO,CAACC,KAAK,CAAC,6BAA6B,CAAC;AAC9C;;AAEA;AACA,OAAO,MAAMC,QAAQ,GAAGT,YAAY,CAACC,WAAW,EAAEI,eAAe,EAAE;EACjEK,IAAI,EAAE;IACJC,cAAc,EAAE,IAAI;IACpBC,gBAAgB,EAAE,IAAI;IACtBC,kBAAkB,EAAE,IAAI;IACxBC,OAAO,EAAEC,MAAM,CAACC,YAAY;IAC5BC,UAAU,EAAE;EACd,CAAC;EACDC,EAAE,EAAE;IACFC,MAAM,EAAE;EACV,CAAC;EACDC,MAAM,EAAE;IACNC,OAAO,EAAE;MACP,oBAAoB,EAAE;IACxB;EACF;AACF,CAAC,CAAC;;AAEF;AACAZ,QAAQ,CAACa,IAAI,CAAC,OAAO,CAAC,CAACC,MAAM,CAAC,OAAO,EAAE;EAAEC,KAAK,EAAE,OAAO;EAAEC,IAAI,EAAE;AAAK,CAAC,CAAC,CACnEC,IAAI,CAAC,CAAC;EAAElB;AAAM,CAAC,KAAK;EACnB,IAAIA,KAAK,EAAE;IACTD,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAACmB,OAAO,CAAC;EAC9D,CAAC,MAAM;IACLpB,OAAO,CAACqB,GAAG,CAAC,yBAAyB,CAAC;EACxC;AACF,CAAC,CAAC;;AAEJ;AACA,OAAO,MAAMC,mBAAmB,GAAIrB,KAAK,IAAK;EAAA,IAAAsB,cAAA,EAAAC,eAAA,EAAAC,eAAA;EAC5CzB,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;;EAEvC;EACA,IAAIyB,YAAY,GAAG,yBAAyB;EAE5C,KAAAH,cAAA,GAAItB,KAAK,CAACmB,OAAO,cAAAG,cAAA,eAAbA,cAAA,CAAeI,QAAQ,CAAC,KAAK,CAAC,EAAE;IAClCD,YAAY,GAAG,4CAA4C;EAC7D,CAAC,MAAM,KAAAF,eAAA,GAAIvB,KAAK,CAACmB,OAAO,cAAAI,eAAA,eAAbA,eAAA,CAAeG,QAAQ,CAAC,eAAe,CAAC,EAAE;IACnDD,YAAY,GAAG,uCAAuC;EACxD,CAAC,MAAM,KAAAD,eAAA,GAAIxB,KAAK,CAACmB,OAAO,cAAAK,eAAA,eAAbA,eAAA,CAAeE,QAAQ,CAAC,SAAS,CAAC,EAAE;IAC7CD,YAAY,GAAG,4BAA4B;EAC7C,CAAC,MAAM,IAAIzB,KAAK,CAACmB,OAAO,EAAE;IACxBM,YAAY,GAAGzB,KAAK,CAACmB,OAAO;EAC9B;EAEA,OAAO;IACLQ,OAAO,EAAE,KAAK;IACd3B,KAAK,EAAEyB;EACT,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMG,qBAAqB,GAAIC,IAAI,IAAK;EAC7C,OAAO;IACLF,OAAO,EAAE,IAAI;IACbE;EACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}