{"ast":null,"code":"const ANILIST_API='https://graphql.anilist.co';// Recherche sur Anilist (manhwas, mangas, webtoons) - VERSION AMÉLIORÉE\nexport const searchAnilistCover=async title=>{// Nettoyer le titre pour améliorer la recherche\nlet cleanTitle=title.replace(/\\s*ep\\s*\\d+.*$/i,'')// Supprimer \"ep XXX\"\n.replace(/\\s*chapter\\s*\\d+.*$/i,'')// Supprimer \"chapter XXX\"\n.replace(/\\s*end\\s*$/i,'')// Supprimer \"End\"\n.trim();const query=\"\\n    query ($search: String) {\\n      Media(search: $search, type: MANGA, sort: SEARCH_MATCH) {\\n        id\\n        title {\\n          romaji\\n          english\\n          native\\n        }\\n        coverImage {\\n          extraLarge\\n          large\\n          medium\\n        }\\n        format\\n        countryOfOrigin\\n      }\\n    }\\n  \";try{var _data$data,_data$data$Media;const response=await fetch(ANILIST_API,{method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify({query,variables:{search:cleanTitle}})});if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if((_data$data=data.data)!==null&&_data$data!==void 0&&(_data$data$Media=_data$data.Media)!==null&&_data$data$Media!==void 0&&_data$data$Media.coverImage){const cover=data.data.Media.coverImage.extraLarge||data.data.Media.coverImage.large||data.data.Media.coverImage.medium;if(cover){console.log(\"\\u2705 [AniList] Trouv\\xE9 pour \\\"\".concat(cleanTitle,\"\\\":\"),data.data.Media.title.romaji||data.data.Media.title.english);return cover;}}}catch(error){console.log(\"\\u274C [AniList] Erreur pour \\\"\".concat(cleanTitle,\"\\\":\"),error.message);}return null;};// Recherche sur Google Books\nexport const searchGoogleBooksCover=async title=>{try{var _data$items$,_data$items$$volumeIn;const response=await fetch(\"https://www.googleapis.com/books/v1/volumes?q=\".concat(encodeURIComponent(title),\"&maxResults=1\"));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();if(data.items&&(_data$items$=data.items[0])!==null&&_data$items$!==void 0&&(_data$items$$volumeIn=_data$items$.volumeInfo)!==null&&_data$items$$volumeIn!==void 0&&_data$items$$volumeIn.imageLinks){const imageLinks=data.items[0].volumeInfo.imageLinks;// Remplacer http par https pour éviter les erreurs\nconst url=imageLinks.large||imageLinks.medium||imageLinks.thumbnail;return url?url.replace('http://','https://'):null;}}catch(error){console.log('Google Books: couverture non trouvée pour',title,error.message);}return null;};// Génération de fallback avec style manga/anime\nconst getFallbackCover=title=>{// Utiliser des images d'anime/manga par défaut de Lorem Picsum avec IDs spécifiques\nconst animeImageIds=[237,1084,1025,823,452,883,1069,548,659,485,593,1074,929,447];const seed=title.split('').reduce((acc,char)=>acc+char.charCodeAt(0),0);const imageId=animeImageIds[seed%animeImageIds.length];// Ajouter un filtre pour donner un aspect \"manga/anime\"\nreturn\"https://picsum.photos/id/\".concat(imageId,\"/400/600?grayscale&blur=1\");};// Fonction principale qui essaie toutes les sources\nexport const getCoverUrl=async title=>{console.log(\"\\uD83D\\uDD0D Recherche de couverture pour: \\\"\".concat(title,\"\\\"\"));// Essayer d'abord Anilist (meilleur pour manhwas/webtoons/mangas)\nlet cover=await searchAnilistCover(title);if(cover){console.log(\"\\u2705 Couverture AniList trouv\\xE9e pour: \".concat(title));return cover;}// Puis Google Books (pour les light novels)\ncover=await searchGoogleBooksCover(title);if(cover){console.log(\"\\u2705 Couverture Google Books trouv\\xE9e pour: \".concat(title));return cover;}// Fallback : image générée avec style manga\nconsole.log(\"\\u26A0\\uFE0F Aucune couverture trouv\\xE9e, utilisation fallback pour: \".concat(title));return getFallbackCover(title);};// Version synchrone pour l'import rapide (utilise fallback immédiatement)\nexport const getCoverUrlSync=title=>{return getFallbackCover(title);};// Fonction pour mettre à jour une couverture après coup\nexport const updateCoverAsync=async title=>{return await getCoverUrl(title);};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}