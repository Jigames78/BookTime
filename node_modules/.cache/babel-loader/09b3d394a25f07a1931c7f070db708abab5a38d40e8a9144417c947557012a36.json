{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\n\n// Détecte si on est dans Claude (window.storage existe) ou en local\nconst isClaudeEnvironment = typeof window !== 'undefined' && window.storage;\nexport const useStorage = (key, initialValue) => {\n  _s();\n  const [data, setData] = useState(initialValue);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        if (isClaudeEnvironment) {\n          // Dans Claude : utiliser le cloud storage\n          const result = await window.storage.get(key, true);\n          if (result && result.value) {\n            setData(JSON.parse(result.value));\n          }\n        } else {\n          // En local : utiliser localStorage\n          const savedData = localStorage.getItem(key);\n          if (savedData) {\n            setData(JSON.parse(savedData));\n          }\n        }\n      } catch (err) {\n        console.log('Première utilisation ou données non trouvées');\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [key]);\n  const saveData = async newData => {\n    try {\n      if (isClaudeEnvironment) {\n        // Dans Claude : sauvegarder dans le cloud\n        await window.storage.set(key, JSON.stringify(newData), true);\n      } else {\n        // En local : sauvegarder dans localStorage\n        localStorage.setItem(key, JSON.stringify(newData));\n      }\n      setData(newData);\n      setError(null);\n    } catch (err) {\n      console.error('Erreur de sauvegarde:', err);\n      setError('Erreur lors de la sauvegarde');\n      alert('Erreur lors de la sauvegarde des données');\n    }\n  };\n  return [data, saveData, loading, error];\n};\n_s(useStorage, \"RuEr0fhRgGilI1bsKTL7rlb0iUw=\");","map":{"version":3,"names":["useState","useEffect","isClaudeEnvironment","window","storage","useStorage","key","initialValue","_s","data","setData","loading","setLoading","error","setError","loadData","result","get","value","JSON","parse","savedData","localStorage","getItem","err","console","log","saveData","newData","set","stringify","setItem","alert"],"sources":["/etudiants/siscol/f/ferna_ji/Bureau/BookTime/src/hooks/useStorage.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n// Détecte si on est dans Claude (window.storage existe) ou en local\nconst isClaudeEnvironment = typeof window !== 'undefined' && window.storage;\n\nexport const useStorage = (key, initialValue) => {\n  const [data, setData] = useState(initialValue);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        if (isClaudeEnvironment) {\n          // Dans Claude : utiliser le cloud storage\n          const result = await window.storage.get(key, true);\n          if (result && result.value) {\n            setData(JSON.parse(result.value));\n          }\n        } else {\n          // En local : utiliser localStorage\n          const savedData = localStorage.getItem(key);\n          if (savedData) {\n            setData(JSON.parse(savedData));\n          }\n        }\n      } catch (err) {\n        console.log('Première utilisation ou données non trouvées');\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [key]);\n\n  const saveData = async (newData) => {\n    try {\n      if (isClaudeEnvironment) {\n        // Dans Claude : sauvegarder dans le cloud\n        await window.storage.set(key, JSON.stringify(newData), true);\n      } else {\n        // En local : sauvegarder dans localStorage\n        localStorage.setItem(key, JSON.stringify(newData));\n      }\n      setData(newData);\n      setError(null);\n    } catch (err) {\n      console.error('Erreur de sauvegarde:', err);\n      setError('Erreur lors de la sauvegarde');\n      alert('Erreur lors de la sauvegarde des données');\n    }\n  };\n\n  return [data, saveData, loading, error];\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;;AAE3C;AACA,MAAMC,mBAAmB,GAAG,OAAOC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,OAAO;AAE3E,OAAO,MAAMC,UAAU,GAAGA,CAACC,GAAG,EAAEC,YAAY,KAAK;EAAAC,EAAA;EAC/C,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAACO,YAAY,CAAC;EAC9C,MAAM,CAACI,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,MAAMc,QAAQ,GAAG,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACF,IAAIb,mBAAmB,EAAE;UACvB;UACA,MAAMc,MAAM,GAAG,MAAMb,MAAM,CAACC,OAAO,CAACa,GAAG,CAACX,GAAG,EAAE,IAAI,CAAC;UAClD,IAAIU,MAAM,IAAIA,MAAM,CAACE,KAAK,EAAE;YAC1BR,OAAO,CAACS,IAAI,CAACC,KAAK,CAACJ,MAAM,CAACE,KAAK,CAAC,CAAC;UACnC;QACF,CAAC,MAAM;UACL;UACA,MAAMG,SAAS,GAAGC,YAAY,CAACC,OAAO,CAACjB,GAAG,CAAC;UAC3C,IAAIe,SAAS,EAAE;YACbX,OAAO,CAACS,IAAI,CAACC,KAAK,CAACC,SAAS,CAAC,CAAC;UAChC;QACF;MACF,CAAC,CAAC,OAAOG,GAAG,EAAE;QACZC,OAAO,CAACC,GAAG,CAAC,8CAA8C,CAAC;MAC7D,CAAC,SAAS;QACRd,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IACDG,QAAQ,CAAC,CAAC;EACZ,CAAC,EAAE,CAACT,GAAG,CAAC,CAAC;EAET,MAAMqB,QAAQ,GAAG,MAAOC,OAAO,IAAK;IAClC,IAAI;MACF,IAAI1B,mBAAmB,EAAE;QACvB;QACA,MAAMC,MAAM,CAACC,OAAO,CAACyB,GAAG,CAACvB,GAAG,EAAEa,IAAI,CAACW,SAAS,CAACF,OAAO,CAAC,EAAE,IAAI,CAAC;MAC9D,CAAC,MAAM;QACL;QACAN,YAAY,CAACS,OAAO,CAACzB,GAAG,EAAEa,IAAI,CAACW,SAAS,CAACF,OAAO,CAAC,CAAC;MACpD;MACAlB,OAAO,CAACkB,OAAO,CAAC;MAChBd,QAAQ,CAAC,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZC,OAAO,CAACZ,KAAK,CAAC,uBAAuB,EAAEW,GAAG,CAAC;MAC3CV,QAAQ,CAAC,8BAA8B,CAAC;MACxCkB,KAAK,CAAC,0CAA0C,CAAC;IACnD;EACF,CAAC;EAED,OAAO,CAACvB,IAAI,EAAEkB,QAAQ,EAAEhB,OAAO,EAAEE,KAAK,CAAC;AACzC,CAAC;AAACL,EAAA,CAjDWH,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}