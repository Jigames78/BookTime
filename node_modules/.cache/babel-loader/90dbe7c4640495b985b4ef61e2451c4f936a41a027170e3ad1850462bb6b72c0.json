{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport VectorIndexApi from './VectorIndexApi';\nimport VectorDataApi from './VectorDataApi';\nimport VectorBucketApi from './VectorBucketApi';\n/**\r\n * Main client for interacting with S3 Vectors API\r\n * Provides access to bucket, index, and vector data operations\r\n *\r\n * **Usage Patterns:**\r\n *\r\n * 1. **Via StorageClient (recommended for most use cases):**\r\n * ```typescript\r\n * import { StorageClient } from '@supabase/storage-js'\r\n *\r\n * const storageClient = new StorageClient(url, headers)\r\n * const vectors = storageClient.vectors\r\n *\r\n * // Use vector operations\r\n * await vectors.createBucket('embeddings-prod')\r\n * const bucket = vectors.from('embeddings-prod')\r\n * await bucket.createIndex({ ... })\r\n * ```\r\n *\r\n * 2. **Standalone (for vector-only applications):**\r\n * ```typescript\r\n * import { StorageVectorsClient } from '@supabase/storage-js'\r\n *\r\n * const vectorsClient = new StorageVectorsClient('https://api.example.com', {\r\n *   headers: { 'Authorization': 'Bearer token' }\r\n * })\r\n *\r\n * // Access bucket operations\r\n * await vectorsClient.createBucket('embeddings-prod')\r\n *\r\n * // Access index operations via buckets\r\n * const bucket = vectorsClient.from('embeddings-prod')\r\n * await bucket.createIndex({\r\n *   indexName: 'documents',\r\n *   dataType: 'float32',\r\n *   dimension: 1536,\r\n *   distanceMetric: 'cosine'\r\n * })\r\n *\r\n * // Access vector operations via index\r\n * const index = bucket.index('documents')\r\n * await index.putVectors({\r\n *   vectors: [\r\n *     { key: 'doc-1', data: { float32: [...] }, metadata: { title: 'Intro' } }\r\n *   ]\r\n * })\r\n *\r\n * // Query similar vectors\r\n * const { data } = await index.queryVectors({\r\n *   queryVector: { float32: [...] },\r\n *   topK: 5,\r\n *   returnDistance: true\r\n * })\r\n * ```\r\n */\nexport class StorageVectorsClient extends VectorBucketApi {\n  constructor(url, options = {}) {\n    super(url, options.headers || {}, options.fetch);\n  }\n  /**\r\n   * Access operations for a specific vector bucket\r\n   * Returns a scoped client for index and vector operations within the bucket\r\n   *\r\n   * @param vectorBucketName - Name of the vector bucket\r\n   * @returns Bucket-scoped client with index and vector operations\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const bucket = client.bucket('embeddings-prod')\r\n   *\r\n   * // Create an index in this bucket\r\n   * await bucket.createIndex({\r\n   *   indexName: 'documents-openai',\r\n   *   dataType: 'float32',\r\n   *   dimension: 1536,\r\n   *   distanceMetric: 'cosine'\r\n   * })\r\n   *\r\n   * // List indexes in this bucket\r\n   * const { data } = await bucket.listIndexes()\r\n   * ```\r\n   */\n  from(vectorBucketName) {\n    return new VectorBucketScope(this.url, this.headers, vectorBucketName, this.fetch);\n  }\n}\n/**\r\n * Scoped client for operations within a specific vector bucket\r\n * Provides index management and access to vector operations\r\n */\nexport class VectorBucketScope extends VectorIndexApi {\n  constructor(url, headers, vectorBucketName, fetch) {\n    super(url, headers, fetch);\n    this.vectorBucketName = vectorBucketName;\n  }\n  /**\r\n   * Creates a new vector index in this bucket\r\n   * Convenience method that automatically includes the bucket name\r\n   *\r\n   * @param options - Index configuration (vectorBucketName is automatically set)\r\n   * @returns Promise with empty response on success or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const bucket = client.bucket('embeddings-prod')\r\n   * await bucket.createIndex({\r\n   *   indexName: 'documents-openai',\r\n   *   dataType: 'float32',\r\n   *   dimension: 1536,\r\n   *   distanceMetric: 'cosine',\r\n   *   metadataConfiguration: {\r\n   *     nonFilterableMetadataKeys: ['raw_text']\r\n   *   }\r\n   * })\r\n   * ```\r\n   */\n  createIndex(options) {\n    const _super = Object.create(null, {\n      createIndex: {\n        get: () => super.createIndex\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.createIndex.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName\n      }));\n    });\n  }\n  /**\r\n   * Lists indexes in this bucket\r\n   * Convenience method that automatically includes the bucket name\r\n   *\r\n   * @param options - Listing options (vectorBucketName is automatically set)\r\n   * @returns Promise with list of indexes or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const bucket = client.bucket('embeddings-prod')\r\n   * const { data } = await bucket.listIndexes({ prefix: 'documents-' })\r\n   * ```\r\n   */\n  listIndexes() {\n    const _super = Object.create(null, {\n      listIndexes: {\n        get: () => super.listIndexes\n      }\n    });\n    return __awaiter(this, arguments, void 0, function* (options = {}) {\n      return _super.listIndexes.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName\n      }));\n    });\n  }\n  /**\r\n   * Retrieves metadata for a specific index in this bucket\r\n   * Convenience method that automatically includes the bucket name\r\n   *\r\n   * @param indexName - Name of the index to retrieve\r\n   * @returns Promise with index metadata or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const bucket = client.bucket('embeddings-prod')\r\n   * const { data } = await bucket.getIndex('documents-openai')\r\n   * console.log('Dimension:', data?.index.dimension)\r\n   * ```\r\n   */\n  getIndex(indexName) {\n    const _super = Object.create(null, {\n      getIndex: {\n        get: () => super.getIndex\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.getIndex.call(this, this.vectorBucketName, indexName);\n    });\n  }\n  /**\r\n   * Deletes an index from this bucket\r\n   * Convenience method that automatically includes the bucket name\r\n   *\r\n   * @param indexName - Name of the index to delete\r\n   * @returns Promise with empty response on success or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const bucket = client.bucket('embeddings-prod')\r\n   * await bucket.deleteIndex('old-index')\r\n   * ```\r\n   */\n  deleteIndex(indexName) {\n    const _super = Object.create(null, {\n      deleteIndex: {\n        get: () => super.deleteIndex\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.deleteIndex.call(this, this.vectorBucketName, indexName);\n    });\n  }\n  /**\r\n   * Access operations for a specific index within this bucket\r\n   * Returns a scoped client for vector data operations\r\n   *\r\n   * @param indexName - Name of the index\r\n   * @returns Index-scoped client with vector data operations\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\r\n   *\r\n   * // Insert vectors\r\n   * await index.putVectors({\r\n   *   vectors: [\r\n   *     { key: 'doc-1', data: { float32: [...] }, metadata: { title: 'Intro' } }\r\n   *   ]\r\n   * })\r\n   *\r\n   * // Query similar vectors\r\n   * const { data } = await index.queryVectors({\r\n   *   queryVector: { float32: [...] },\r\n   *   topK: 5\r\n   * })\r\n   * ```\r\n   */\n  index(indexName) {\n    return new VectorIndexScope(this.url, this.headers, this.vectorBucketName, indexName, this.fetch);\n  }\n}\n/**\r\n * Scoped client for operations within a specific vector index\r\n * Provides vector data operations (put, get, list, query, delete)\r\n */\nexport class VectorIndexScope extends VectorDataApi {\n  constructor(url, headers, vectorBucketName, indexName, fetch) {\n    super(url, headers, fetch);\n    this.vectorBucketName = vectorBucketName;\n    this.indexName = indexName;\n  }\n  /**\r\n   * Inserts or updates vectors in this index\r\n   * Convenience method that automatically includes bucket and index names\r\n   *\r\n   * @param options - Vector insertion options (bucket and index names automatically set)\r\n   * @returns Promise with empty response on success or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\r\n   * await index.putVectors({\r\n   *   vectors: [\r\n   *     {\r\n   *       key: 'doc-1',\r\n   *       data: { float32: [0.1, 0.2, ...] },\r\n   *       metadata: { title: 'Introduction', page: 1 }\r\n   *     }\r\n   *   ]\r\n   * })\r\n   * ```\r\n   */\n  putVectors(options) {\n    const _super = Object.create(null, {\n      putVectors: {\n        get: () => super.putVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.putVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\r\n   * Retrieves vectors by keys from this index\r\n   * Convenience method that automatically includes bucket and index names\r\n   *\r\n   * @param options - Vector retrieval options (bucket and index names automatically set)\r\n   * @returns Promise with array of vectors or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\r\n   * const { data } = await index.getVectors({\r\n   *   keys: ['doc-1', 'doc-2'],\r\n   *   returnMetadata: true\r\n   * })\r\n   * ```\r\n   */\n  getVectors(options) {\n    const _super = Object.create(null, {\n      getVectors: {\n        get: () => super.getVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.getVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\r\n   * Lists vectors in this index with pagination\r\n   * Convenience method that automatically includes bucket and index names\r\n   *\r\n   * @param options - Listing options (bucket and index names automatically set)\r\n   * @returns Promise with array of vectors and pagination token\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\r\n   * const { data } = await index.listVectors({\r\n   *   maxResults: 500,\r\n   *   returnMetadata: true\r\n   * })\r\n   * ```\r\n   */\n  listVectors() {\n    const _super = Object.create(null, {\n      listVectors: {\n        get: () => super.listVectors\n      }\n    });\n    return __awaiter(this, arguments, void 0, function* (options = {}) {\n      return _super.listVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\r\n   * Queries for similar vectors in this index\r\n   * Convenience method that automatically includes bucket and index names\r\n   *\r\n   * @param options - Query options (bucket and index names automatically set)\r\n   * @returns Promise with array of similar vectors ordered by distance\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\r\n   * const { data } = await index.queryVectors({\r\n   *   queryVector: { float32: [0.1, 0.2, ...] },\r\n   *   topK: 5,\r\n   *   filter: { category: 'technical' },\r\n   *   returnDistance: true,\r\n   *   returnMetadata: true\r\n   * })\r\n   * ```\r\n   */\n  queryVectors(options) {\n    const _super = Object.create(null, {\n      queryVectors: {\n        get: () => super.queryVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.queryVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n  /**\r\n   * Deletes vectors by keys from this index\r\n   * Convenience method that automatically includes bucket and index names\r\n   *\r\n   * @param options - Deletion options (bucket and index names automatically set)\r\n   * @returns Promise with empty response on success or error\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const index = client.bucket('embeddings-prod').index('documents-openai')\r\n   * await index.deleteVectors({\r\n   *   keys: ['doc-1', 'doc-2', 'doc-3']\r\n   * })\r\n   * ```\r\n   */\n  deleteVectors(options) {\n    const _super = Object.create(null, {\n      deleteVectors: {\n        get: () => super.deleteVectors\n      }\n    });\n    return __awaiter(this, void 0, void 0, function* () {\n      return _super.deleteVectors.call(this, Object.assign(Object.assign({}, options), {\n        vectorBucketName: this.vectorBucketName,\n        indexName: this.indexName\n      }));\n    });\n  }\n}\n//# sourceMappingURL=StorageVectorsClient.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}